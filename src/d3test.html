<!DOCTYPE html>
<meta charset='utf-8'>
<style>
html, body, body > svg, body > div {
 position: fixed;
 margin:0; padding:0; height:100%; width:100%; overflow:hidden;
}
body > div {
 pointer-events: none;
}
</style>
<body>
<svg>
</svg>
<div>
</div>
<script src='d3.js'></script>
<script>
var datanodes = [{
     name: 'Alice',
   }, {
     name: 'Bob',
   }, {
     name: 'Carol',
   }, {
     name: 'David',
   }];

var datalinks = [{
     source: 0,
     target: 1
   }, {
     source: 2,
     target: 3
   }];

// http://stackoverflow.com/questions/28102089/simple-graph-of-nodes-and-links-without-using-force-layout

var svg = d3.select('svg');
var lines = svg.selectAll('line')
   .data(datalinks)
   .enter()
   .append('line')
   .attr({
      class: 'link',
      fill: 'none',
      stroke: 'silver',
      'stroke-width': 150,
      'stroke-linecap': 'round'
   });


var nodegroups = svg.selectAll('g')
    .data(datanodes)
    .enter()
    .append('g');

nodegroups.append('circle')
    .attr({
      cx: 0, cy: 0, r: 25,
      fill: 'lightyellow',
      stroke: 'gray',
      'stroke-width': 2.5
    });

nodegroups.append('text')
   .attr({
      'alignment-baseline': 'middle',
      'text-anchor': 'middle',
      y: 1
   }).
   style({
      font: '16px Arial'
   })
   .text(function(d) { return d.name; });

var force = d3.layout.force()
    .charge(-300)
    .linkDistance(75)
    .nodes(datanodes).links(datalinks);
resize();

d3.select(window).on('resize', resize);
function resize() {
  force.size([parseFloat(svg.style('width')), parseFloat(svg.style('height'))]);
}

function tick() {
  lines.attr('x1', function(d) { return d.source.x; });
  lines.attr('y1', function(d) { return d.source.y; });
  lines.attr('x2', function(d) { return d.target.x; });
  lines.attr('y2', function(d) { return d.target.y; });
  nodegroups.attr('transform', function(d) {
    return 'translate(' + [d.x, d.y] + ')';
  });
}

function attachedNodes(node) {
  var attached = [];
  for (var j = 0; j < datalinks.length; ++j) {
    var link = datalinks[j];
    if (link.source === node) {
      attached.push(link.target);
    } else if (link.target === node) {
      attached.push(link.source);
    }
  }
  return attached;
}

var fixedAfterDrag = 1;
var nodedrag = d3.behavior.drag().on('dragstart.force', function(d) {
  d.fixed |= 2 | fixedAfterDrag;
  attachedNodes(d).map(function(d2) {
    d2.fixed |= 2;
  });
}).on('drag.force', function(d) {
  d.px += d3.event.dx;
  d.py += d3.event.dy;
  force.resume();
}).on('dragend.force', function(d) {
  d.fixed &= ~2;
  attachedNodes(d).map(function(d2) {
    d2.fixed &= ~2;
  });
});
nodegroups.call(nodedrag);
nodegroups.on('mouseover.force', function(d) {
  d.fixed |= 4;
  d.px = d.x;
  d.py = d.y;
}).on('mouseout.force', function(d) {
  d.fixed &= ~4;
});
var linedrag = d3.behavior.drag().on('dragstart.force', function(d) {
  d.source.fixed |= 2 | fixedAfterDrag;
  d.target.fixed |= 2 | fixedAfterDrag;
}).on('drag.force', function(d) {
  d.source.px += d3.event.dx;
  d.source.py += d3.event.dy;
  d.target.px += d3.event.dx;
  d.target.py += d3.event.dy;
  force.resume();
}).on('dragend.force', function(d) {
  d.source.fixed &= ~2;
  d.target.fixed &= ~2;
});
lines.call(linedrag);
lines.on('mouseover.force', function(d) {
  d.source.fixed |= 4;
  d.target.fixed |= 4;
  d.source.px = d.source.x;
  d.source.py = d.source.y;
  d.target.px = d.target.x;
  d.target.py = d.target.y;
}).on('mouseout.force', function(d) {
  d.source.fixed &= ~4;
  d.target.fixed &= ~4;
});

force.on('tick', tick);
force.start()
</script>


